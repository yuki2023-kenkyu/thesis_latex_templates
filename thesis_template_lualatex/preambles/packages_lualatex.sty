% LuaLaTeX + luatexja + bxjsreportを前提とした例
\usepackage{luatexja}
% \usepackage{csquotes} % biblatexと併用する場合は不要
% \usepackage[japanese,english]{babel} % 必要なら英語環境を有効化
% \usepackage{bxorigcapt}
% ドライバ非依存でgraphicx読み込み
\usepackage{graphicx}
\usepackage{bmpsize}
\usepackage{here}
\usepackage{comment}
\usepackage{amsmath, amssymb, amsthm, physics2}
\usepackage{mathtools}
\usepackage{booktabs}
\usepackage{bookmark}
\usepackage{xurl}
\usepackage{hyperref}
\hypersetup{% hyperrefオプションリスト
  unicode=true,
  colorlinks=false,
  setpagesize=false,
  bookmarksnumbered=true,%
  bookmarksopen=true,% ブックマークを開く
  hidelinks,
  % pdfusetitle
}
\usepackage{wrapfig}
\usepackage{enumerate}
\usepackage[
  format=plain,
  labelformat=simple,
  labelsep=space,
  font={bf, small}
]{caption}
\usepackage{breqn} % dmath環境などはLuaLaTeXでも利用可能
\usepackage{listings, color}
% \usepackage{autonum} % 必要なら使用可 (LuaLaTeXでも可)
\usepackage[version=4]{mhchem} % 化学式
\usepackage{siunitx} % 単位表記\usepackage{bookmark}
\usepackage{tikz-feynhand}
\usepackage{./preambles/biblatex-journal-style} % 削除または環境に応じて修正
% biblatexはbiberバックエンドで問題なし
\usepackage[
  backend=biber,
  style=numeric,
  sorting=none
]{biblatex}
\usepackage{./preambles/zref-settings}

\usephysicsmodule{ab} % Physics2のブラケット表記を有効化

% 日本語キャプション設定や数式番号などはそのまま利用可能
\numberwithin{equation}{chapter}
\renewcommand{\thefigure}{\thechapter.\arabic{figure}}
\renewcommand{\thetable}{\thechapter.\arabic{table}}

% 付録のソースコードの出力に関する設定
\renewcommand{\lstlistingname}{ソースコード} % ソースコードのキャプション名

\lstset{
  language = Python,
  %背景色と透過度
  backgroundcolor={\color[gray]{.90}},
  %枠外に行った時の自動改行
  breaklines = true,
  %自動改行後のインデント量(デフォルトでは20[pt])
  breakindent = 10pt,
  %標準の書体
  basicstyle = \ttfamily\scriptsize,
  %コメントの書体
  commentstyle = {\itshape \color[cmyk]{1,0.4,1,0}},
  %関数名等の色の設定
  classoffset = 0,
  %キーワード(int, ifなど)の書体
  keywordstyle = {\bfseries \color[cmyk]{0,1,0,0}},
  %表示する文字の書体
  stringstyle = {\ttfamily \color[rgb]{0,0,1}},
  %枠 "t"は上に線を記載, "T"は上に二重線を記載
  %他オプション：leftline，topline，bottomline，lines，single，shadowbox
  frame = TBrl,
  %frameまでの間隔(行番号とプログラムの間)
  framesep = 5pt,
  %行番号の位置
  numbers = left,
  %行番号の間隔
  stepnumber = 1,
  %行番号の書体
  numberstyle = \tiny,
  %タブの大きさ
  tabsize = 4,
  %キャプションの場所("tb"ならば上下両方に記載)
  captionpos = t
}

